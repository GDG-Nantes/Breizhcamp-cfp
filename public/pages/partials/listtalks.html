<div class="row">
    <div ng-repeat="talk in talks | filter:doStatus">
        <div class="modal fade" id="deleteTalk{{talk.id}}">
            <div class="modal-header">
                <a class="close" data-dismiss="modal">&times;</a>
                <h3>Suppression du Talk {{talk.title}}</h3>
            </div>
            <div class="modal-body">
                <p>Attention, le talk va être supprimé.</p>
            </div>
            <div class="modal-footer">
                <a href="#" class="btn" data-dismiss="modal">Annuler</a>
                <form ng-submit="deleteTalk({{talk}})" name="formdelete{{talk.id}}">
                    <input type="submit" class="btn btn-primary" value="Supprimer" />
                </form>
            </div>
        </div>
    </div>

    <div class="span12">
        <div class="row">
            <div class="span6">
                <div class="well">
                        <fieldset>
                            <form>
                               <select id="status" name="status" multiple="true" ng-model="status">
                                   <option value="REJETE" >Rejeté</option>
                                   <option value="ACCEPTE" >Accepté</option>
                                   <option value="ATTENTE" >Attente</option>
                                   <option value="NULL" >Sans status</option>
                               </select>
                            </form>
                    </fieldset>
                </div>
            </div>
            <div class="span6">
                <div class="row">
                    <div class="span4 well">
                        <p>{{(talks|filter:talksAcceptes).length}} talks acceptés</p>
                    </div>
                </div>
                <div class="row">
                    <div class="span4 well">
                        <a href="/talk/all/csv" class="btn btn-info">Export CSV</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<div class="row">
    <div class="span12">
        <table class="table table-bordered table-striped">
            <tbody><tr>
                <th class="span2">Speaker</th>
                <th class="span6">Titre</th>
                <th class="span6">Créneaux</th>
                <th class="span2">Statut</th>
                <th class="span1">Note</th>
                <th class="span1" ng-show="vote.status == 'CLOSED'"><a ng-click="predicate = 'moyenne'; reverse=!reverse">Moyenne</a></th>
                <th class="span1">Actions</th>
            </tr>

            <tr ng-repeat="talk in talks | filter:doStatus | orderBy:predicate:reverse ">
                <td><div ng-show="talk.speaker != null"><a ng-href="/#/profil/{{talk.speaker.id}}" ><img ng-src="{{talk.speaker.avatar}}" style="height : 30px" class="img-rounded"> {{talk.speaker.fullname}}</a></div>
                    <div ng-show="talk.speaker == null">Compte Supprimé</div></td>
                <td><a href="#talk{{talk.id}}" data-toggle="modal">{{talk.title}}</a>
                    <div id="talk{{talk.id}}" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="talkLabel{{talk.id}}" aria-hidden="true">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                        <h3 id="talkLabel{{talk.id}}"><a href="/#/talks/see/{{talk.id}}" data-dismiss="modal">{{talk.title}}</a></h3>
                                    </div>
                                    <div class="modal-body">
                                        <h4>Speakers :</h4>
                                            <div ng-show="talk.speaker != null"><a ng-href="/#/profil/{{talk.speaker.id}}" data-dismiss="modal"><img ng-src="{{talk.speaker.avatar}}" style="height : 30px" class="img-rounded"> {{talk.speaker.fullname}}</a></div>
                                            <div ng-show="talk.speaker == null">Compte Supprimé</div>
                                        <h4>Description :</h4>
                                        <p ng-bind-html-unsafe="getSafeDescription(talk.description)"></p>
                                        <p><a href="/#/talks/see/{{talk.id}}" target="_blank" data-dismiss="modal">détails</a></p>
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                                    </div>
                                </div>
                </td>
                <td><p class="help-inline" ng-repeat="creneau in talk.creneaux">
                        <span class="label" ng-show="(talk.dureePreferee == null || creneau.id!=talk.dureePreferee) && (talk.dureeApprouve == null || creneau.id!=talk.dureeApprouve)">{{creneau.libelle + ' (' + creneau.dureeMinutes + 'min)'}}</span>
                        <span class="label label-info" ng-show="(talk.dureePreferee != null &&  creneau.id==talk.dureePreferee) && (talk.dureeApprouve == null ||  creneau.id!=talk.dureeApprouve) ">{{creneau.libelle + ' (' + creneau.dureeMinutes + 'min)'}}</span>
                        <span class="label label-success" ng-show="talk.dureeApprouve != null &&  creneau.id==talk.dureeApprouve">{{creneau.libelle + ' (' + creneau.dureeMinutes + 'min)'}}</span>
                    </p>
                </td>
                <td><div ng-show="talk.statusTalk != undefined" ng-switch on="talk.statusTalk">
                    <span class="label label-important" ng-switch-when="REJETE">Rejeté</span>
                    <span class="label label-warning" ng-switch-when="ATTENTE">Liste d'attente</span>
                    <span class="label label-success" ng-switch-when="ACCEPTE">Accepté</span>
                </div></td>

                <td>{{talk.vote}}</td>
                <td ng-show="vote.status == 'CLOSED'">{{talk.moyenne}}</td>
                <td><a  class="btn" href="#deleteTalk{{talk.id}}" data-toggle="modal">Supprimer</a></td>
            </tr>

            </tbody>
        </table>
    </div>

</div>